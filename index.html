<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ‰ å¤šè¯­è¨€å¹¸è¿è½¬ç›˜ - DeFi æŒ–çŸ¿</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');

  /* å…¨å±€æ ·å¼ */
  body {
    margin: 0; padding: 40px 20px 80px;
    min-height: 100vh;
    background:
      radial-gradient(circle at center, #005d40, #012f20 80%),
      linear-gradient(45deg, #004e2e, #002110);
    font-family: 'Rubik', sans-serif;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
    user-select: none;
  }
  h1 {
    font-weight: 700;
    font-size: 2.4rem;
    margin-bottom: 6px;
    text-shadow: 0 0 6px #009d77;
  }
  p.subtitle {
    font-size: 1.2rem;
    margin-bottom: 24px;
    opacity: 0.85;
    text-shadow: 0 0 3px #004433;
  }

  /* è¯­è¨€é€‰æ‹©ä¸‹æ‹‰æ¡† */
  #langSelect {
    position: fixed;
    top: 16px;
    right: 16px;
    padding: 8px 14px;
    font-size: 1rem;
    border-radius: 8px;
    border: none;
    background-color: #009d77;
    color: white;
    cursor: pointer;
    z-index: 9999;
    transition: background-color 0.3s ease;
  }
  #langSelect:hover {
    background-color: #007955;
  }

  /* è½¬ç›˜å®¹å™¨ */
  .wheel-container {
    position: relative;
    width: 480px; height: 480px;
    box-shadow:
      0 0 15px #00bfa5,
      inset 0 0 30px #00bfa5;
    border-radius: 50%;
    background: radial-gradient(circle, #004d3d 0%, #00322a 90%);
    user-select: none;
  }

  canvas#wheelcanvas {
    border-radius: 50%;
    display: block;
    margin: auto;
  }

  /* å½©ç¯ç¯ */
  .lights-ring {
    position: absolute;
    top: -15px; left: -15px;
    width: 510px; height: 510px;
    border-radius: 50%;
    pointer-events: none;
    box-shadow:
      0 0 15px #00ffd8,
      0 0 30px #00ffd8,
      0 0 50px #00ffd8,
      0 0 80px #00ffe0;
    animation: pulseLights 3s infinite alternate;
    z-index: 5;
  }
  @keyframes pulseLights {
    0% {
      box-shadow:
        0 0 12px #00f0d5,
        0 0 24px #00f0d5,
        0 0 40px #00f7df,
        0 0 60px #00ffe5;
    }
    100% {
      box-shadow:
        0 0 20px #00ffe5,
        0 0 40px #00ffe5,
        0 0 60px #00f7df,
        0 0 80px #00f0d5;
    }
  }

  /* æŒ‡é’ˆï¼šå‘å†…æŒ‡å‘è½¬ç›˜ä¸­å¿ƒ */
  #pointer {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 22px solid transparent;
    border-right: 22px solid transparent;
    border-bottom: 40px solid #ff3c00;
    filter: drop-shadow(0 0 6px rgba(255, 60, 0, 0.9));
    z-index: 10;
  }

  /* æŒ‰é’® */
  #spinbtn {
    margin-top: 32px;
    padding: 16px 56px;
    font-size: 1.4rem;
    background: #ffbf00;
    color: #333;
    font-weight: 700;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    box-shadow: 0 6px 18px rgba(255, 191, 0, 0.7);
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #spinbtn:hover:not(:disabled) {
    background: #ffd732;
  }
  #spinbtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* ç»“æœæç¤º */
  #result {
    margin-top: 40px;
    font-size: 1.6rem;
    font-weight: 700;
    min-height: 80px;
    text-align: center;
    text-shadow: 0 0 8px #ff8a00;
  }
  #confirmBtn {
    margin-top: 18px;
    padding: 14px 42px;
    font-size: 1.25rem;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.8);
    display: none;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #confirmBtn:hover {
    background: #218838;
  }

  /* åº•éƒ¨é—ªç”µç¬¦å· */
  .footer-icon {
    margin-top: 52px;
    font-size: 72px;
    color: #ffe066;
    filter: drop-shadow(0 0 12px #ffe066);
    animation: flashLightning 1.8s infinite alternate;
    user-select: none;
  }
  @keyframes flashLightning {
    0% { opacity: 1; }
    100% { opacity: 0.5; }
  }
</style>
</head>
<body>

<!-- è¯­è¨€é€‰æ‹© -->
<select id="langSelect" aria-label="Select language / é€‰æ‹©è¯­è¨€ / è¨€èªã‚’é¸æŠ">
  <option value="pt" selected>PortuguÃªs (BR)</option>
  <option value="en">English</option>
  <option value="zh">ä¸­æ–‡</option>
  <option value="ja">æ—¥æœ¬èª</option>
</select>

<h1 id="title">ğŸ‰ Roda da Sorte DeFi - MineraÃ§Ã£o</h1>
<p id="subtitle" class="subtitle">Gire a roleta e ganhe bÃ´nus exclusivos em USDT!</p>

<div class="wheel-container">
  <canvas id="wheelcanvas" width="480" height="480"></canvas>
  <div class="lights-ring"></div>
  <div id="pointer"></div>
</div>

<button id="spinbtn">GIRAR ğŸ</button>

<div id="result"></div>
<button id="confirmBtn">Confirmar e Receber</button>

<div class="footer-icon">âš¡</div>

<script>
  // å¤šè¯­è¨€æ•°æ®
  const langData = {
    pt: {
      title: "ğŸ‰ Roda da Sorte DeFi - MineraÃ§Ã£o",
      subtitle: "Gire a roleta e ganhe bÃ´nus exclusivos em USDT!",
      spinBtn: "GIRAR ğŸ",
      confirmBtn: "Confirmar e Receber",
      prizes: [
        "5 USDT",
        "10 USDT",
        "30 USDT",
        "ExperiÃªncia 3 dias",
        "100 USDT",
        "Obrigado pela participaÃ§Ã£o",
        "MineraÃ§Ã£o 7 dias",
        "1000 USDT"
      ],
      congrats: (prize) => `ğŸ‰ ParabÃ©ns! VocÃª foi muito sortudo e ganhou <strong>${prize}</strong>!`,
      thanks: "ğŸ™ Obrigado por participar! Tente novamente!",
      confirmRedirectText: "Clique em 'Confirmar e Receber' para continuar.",
      alreadySpinned: "âš ï¸ VocÃª jÃ¡ participou e sÃ³ pode girar uma vez!"
    },
    en: {
      title: "ğŸ‰ DeFi Lucky Wheel - Mining",
      subtitle: "Spin the wheel and win exclusive USDT bonuses!",
      spinBtn: "SPIN ğŸ",
      confirmBtn: "Confirm & Claim",
      prizes: [
        "5 USDT",
        "10 USDT",
        "30 USDT",
        "3-day Trial",
        "100 USDT",
        "Thanks for participating",
        "7-day Mining",
        "1000 USDT"
      ],
      congrats: (prize) => `ğŸ‰ Congratulations! You are very lucky and won <strong>${prize}</strong>!`,
      thanks: "ğŸ™ Thanks for participating! Try again!",
      confirmRedirectText: "Click 'Confirm & Claim' to continue.",
      alreadySpinned: "âš ï¸ You have already participated. Only one spin per user!"
    },
    zh: {
      title: "ğŸ‰ DeFi å¹¸è¿è½¬ç›˜ - æŒ–çŸ¿",
      subtitle: "æ—‹è½¬è½¬ç›˜ï¼Œèµ¢å–ç‹¬å®¶USDTå¥–åŠ±ï¼",
      spinBtn: "å¼€å§‹æŠ½å¥– ğŸ",
      confirmBtn: "ç¡®è®¤é¢†å–",
      prizes: [
        "5 USDT",
        "10 USDT",
        "30 USDT",
        "ä½“éªŒ3å¤©",
        "100 USDT",
        "è°¢è°¢å‚ä¸",
        "æŒ–çŸ¿7å¤©",
        "1000 USDT"
      ],
      congrats: (prize) => `ğŸ‰ æ­å–œä½ å¤ªå¹¸è¿äº†ï¼ŒæŠ½ä¸­äº† <strong>${prize}</strong>ï¼`,
      thanks: "ğŸ™ è°¢è°¢å‚ä¸ï¼è¯·å†è¯•ä¸€æ¬¡ï¼",
      confirmRedirectText: "ç‚¹å‡»â€œç¡®è®¤é¢†å–â€ç»§ç»­ã€‚",
      alreadySpinned: "âš ï¸ æ‚¨å·²å‚ä¸è¿‡ï¼Œæ¯ä¸ªç”¨æˆ·ä»…èƒ½æŠ½å¥–ä¸€æ¬¡ï¼"
    },
    ja: {
      title: "ğŸ‰ DeFi ãƒ©ãƒƒã‚­ãƒ¼ãƒ›ã‚¤ãƒ¼ãƒ« - ãƒã‚¤ãƒ‹ãƒ³ã‚°",
      subtitle: "ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’å›ã—ã¦USDTã®é™å®šãƒœãƒ¼ãƒŠã‚¹ã‚’ã‚²ãƒƒãƒˆï¼",
      spinBtn: "ã‚¹ãƒ”ãƒ³ ğŸ",
      confirmBtn: "ç¢ºèªã—ã¦å—ã‘å–ã‚‹",
      prizes: [
        "5 USDT",
        "10 USDT",
        "30 USDT",
        "3æ—¥é–“ä½“é¨“",
        "100 USDT",
        "ã”å‚åŠ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™",
        "7æ—¥é–“ãƒã‚¤ãƒ‹ãƒ³ã‚°",
        "1000 USDT"
      ],
      congrats: (prize) => `ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã¨ã¦ã‚‚ãƒ©ãƒƒã‚­ãƒ¼ã§ <strong>${prize}</strong> ã‚’ç²å¾—ã—ã¾ã—ãŸï¼`,
      thanks: "ğŸ™ ã”å‚åŠ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ï¼",
      confirmRedirectText: "'ç¢ºèªã—ã¦å—ã‘å–ã‚‹' ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç¶šè¡Œã—ã¦ãã ã•ã„ã€‚",
      alreadySpinned: "âš ï¸ ã™ã§ã«å‚åŠ æ¸ˆã¿ã§ã™ã€‚ãŠä¸€äººæ§˜ä¸€å›é™ã‚Šã®æŠ½é¸ã§ã™ï¼"
    }
  };

  let currentLang = 'pt';

  // DOMå…ƒç´ 
  const titleEl = document.getElementById("title");
  const subtitleEl = document.getElementById("subtitle");
  const spinBtn = document.getElementById("spinbtn");
  const confirmBtn = document.getElementById("confirmBtn");
  const resultDiv = document.getElementById("result");
  const langSelect = document.getElementById("langSelect");
  const canvas = document.getElementById("wheelcanvas");
  const ctx = canvas.getContext("2d");

  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const radius = 220;
  const segmentCount = 8;
  const segmentAngle = 2 * Math.PI / segmentCount;

  const colors = [
    "#ff6f61",
    "#f7b733",
    "#4caf50",
    "#2196f3",
    "#ff9800",
    "#9c27b0",
    "#00bcd4",
    "#e91e63"
  ];

  let spinning = false;
  let spinAngleStart = 0;
  let spinTime = 0;
  let spinTimeTotal = 0;

  // æ ¹æ®è¯­è¨€ç»˜åˆ¶è½¬ç›˜
  function drawWheel() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // è½¬ç›˜åˆ†å—ç»˜åˆ¶
    for (let i = 0; i < segmentCount; i++) {
      let startAngle = segmentAngle * i;
      let endAngle = startAngle + segmentAngle;
      // æ‰‡åŒºé¢œè‰²
      ctx.fillStyle = colors[i % colors.length];
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, radius, startAngle, endAngle, false);
      ctx.lineTo(centerX, centerY);
      ctx.fill();

      // æ‰‡åŒºè¾¹ç•Œçº¿
      ctx.strokeStyle = "#222";
      ctx.lineWidth = 2;
      ctx.stroke();

      // å¥–å“æ–‡å­—
      ctx.save();
      ctx.fillStyle = "#fff";
      ctx.translate(centerX, centerY);
      ctx.rotate(startAngle + segmentAngle / 2);
      ctx.textAlign = "right";
      ctx.font = "bold 18px Rubik, sans-serif";
      ctx.fillText(langData[currentLang].prizes[i], radius - 15, 10);
      ctx.restore();
    }
  }

  // æ—‹è½¬è§’åº¦(åº¦æ•°è½¬å¼§åº¦)
  function rotateWheel(angle) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(angle);
    ctx.translate(-centerX, -centerY);
    drawWheel();
    ctx.restore();
  }

  // è½¬ç›˜è½¬åŠ¨åŠ¨ç”»
  function easeOut(t, b, c, d) {
    // ç¼“åŠ¨å‡½æ•° - å‡é€Ÿæ•ˆæœ
    t /= d;
    t--;
    return c * (t * t * t + 1) + b;
  }

  // å¼€å§‹è½¬ç›˜
  function startSpin() {
    if (spinning) return;
    spinning = true;
    spinBtn.disabled = true;
    resultDiv.innerHTML = "";
    confirmBtn.style.display = "none";

    spinAngleStart = Math.random() * 10 + 20; // åˆå§‹é€Ÿåº¦ï¼ˆè½¬å‡ åœˆï¼‰
    spinTime = 0;
    spinTimeTotal = Math.random() * 3 + 4 * 1000; // 4-7ç§’è½¬åŠ¨æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

    requestAnimationFrame(rotate);
  }

  function rotate(timestamp) {
    if (!spinStartTime) spinStartTime = timestamp;
    const elapsed = timestamp - spinStartTime;
    spinTime = elapsed;

    if (spinTime >= spinTimeTotal) {
      stopRotate();
      spinStartTime = null;
      return;
    }

    let angle = easeOut(spinTime, 0, spinAngleStart * 2 * Math.PI, spinTimeTotal);
    rotateWheel(angle);
    requestAnimationFrame(rotate);
  }

  let spinStartTime = null;

  // è½¬ç›˜åœæ­¢åçš„å¤„ç†
  function stopRotate() {
    spinning = false;

    // è®¡ç®—è½ç‚¹å¥–å“ç´¢å¼•
    // å› ä¸ºcanvasé€†æ—¶é’ˆä¸ºæ­£è§’åº¦ï¼ŒæŒ‡é’ˆåœ¨é¡¶éƒ¨ï¼ˆ0åº¦ï¼‰
    // æˆ‘ä»¬è¦æ‰¾åˆ°è§’åº¦å¯¹åº”å¥–å“index
    const normalizedAngle = spinAngleStart * 2 * Math.PI % (2 * Math.PI);
    // è½¬ç›˜é€†æ—¶é’ˆè½¬åŠ¨ï¼Œç»“æœè§’åº¦æ˜¯æ—‹è½¬äº†å¤šå°‘ï¼Œæ‰€ä»¥çœŸå®è§’åº¦ï¼š
    // çœŸå®æŒ‡é’ˆè§’åº¦ = 2PI - normalizedAngle
    const pointerAngle = (2 * Math.PI) - (spinAngleStart * 2 * Math.PI % (2 * Math.PI));

    // è®¡ç®—å¥–å“ç´¢å¼•
    // æŒ‡é’ˆè§’åº¦ä»0åº¦å¼€å§‹ï¼Œå¥–å“0åœ¨0~segmentAngleèŒƒå›´ï¼Œå¥–å“1åœ¨segmentAngle~2*segmentAngleï¼Œä»¥æ­¤ç±»æ¨
    let index = Math.floor(pointerAngle / segmentAngle) % segmentCount;

    // æ˜¾ç¤ºä¸­å¥–ä¿¡æ¯
    const prize = langData[currentLang].prizes[index];
    resultDiv.innerHTML = langData[currentLang].congrats(prize);
    confirmBtn.style.display = "inline-block";

    // è®°å½•ç”¨æˆ·å·²æŠ½å¥–
    localStorage.setItem("hasSpinned", "true");
  }

  // è¯­è¨€åˆ‡æ¢æ›´æ–°æ–‡æœ¬
  function updateLanguage(lang) {
    currentLang = lang;
    const data = langData[lang];
    titleEl.textContent = data.title;
    subtitleEl.textContent = data.subtitle;
    spinBtn.textContent = data.spinBtn;
    confirmBtn.textContent = data.confirmBtn;

    // é‡æ–°ç»˜åˆ¶è½¬ç›˜
    drawWheel();

    // å·²ç»å‚ä¸è¿‡ï¼Œæ˜¾ç¤ºæç¤ºå¹¶ç¦ç”¨æŒ‰é’®
    if (localStorage.getItem("hasSpinned") === "true") {
      spinBtn.disabled = true;
      resultDiv.textContent = data.alreadySpinned;
      confirmBtn.style.display = "none";
    } else {
      spinBtn.disabled = false;
      resultDiv.textContent = "";
      confirmBtn.style.display = "none";
    }
  }

  // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²è½¬è¿‡
  function checkHasSpinned() {
    if (localStorage.getItem("hasSpinned") === "true") {
      spinBtn.disabled = true;
      resultDiv.textContent = langData[currentLang].alreadySpinned;
      confirmBtn.style.display = "none";
      return true;
    }
    return false;
  }

  // ç»‘å®šäº‹ä»¶
  langSelect.addEventListener("change", e => {
    updateLanguage(e.target.value);
  });

  spinBtn.addEventListener("click", () => {
    if (checkHasSpinned()) return;
